# åç«¯é‡æ„åçš„æ–‡ä»¶æ¸…ç†åˆ†æ

## æ¦‚è¿°
åœ¨å®Œæˆå¤šç«¯APIæ¶æ„é‡æ„åï¼Œç¡®å®å­˜åœ¨ä¸€äº›å†—ä½™æ–‡ä»¶å¯ä»¥æ¸…ç†ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„åˆ†æå’Œå»ºè®®ã€‚

## ğŸ”´ å¯ä»¥åˆ é™¤çš„å†—ä½™æ–‡ä»¶

### 1. æ—§ç‰ˆè®¤è¯ç›¸å…³æ–‡ä»¶
è¿™äº›æ–‡ä»¶å·²è¢«æ–°çš„å¤šç«¯APIè®¤è¯ç³»ç»Ÿæ›¿ä»£ï¼š

```
/apps/users/views/auth_views.py          # æ—§ç‰ˆè®¤è¯è§†å›¾
/apps/users/urls/auth_urls.py            # æ—§ç‰ˆè®¤è¯è·¯ç”±
```

**åŸå› ï¼š**
- æ–°æ¶æ„ä¸­ï¼Œè®¤è¯åŠŸèƒ½å·²åˆ†åˆ«å®ç°åœ¨ï¼š
  - `/apps/api_user/views/auth_views.py` (ç”¨æˆ·ç«¯)
  - `/apps/api_merchant/views/auth_views.py` (å•†æˆ·ç«¯)
  - `/apps/api_admin/views/auth_views.py` (ç®¡ç†ç«¯)
- æ—§ç‰ˆè®¤è¯è§†å›¾åŒ…å«å¤æ‚çš„ç±»è§†å›¾ï¼Œæ–°ç‰ˆä½¿ç”¨æ›´ç®€æ´çš„å‡½æ•°è§†å›¾

### 2. æ··åˆä¸šåŠ¡è·¯ç”±æ–‡ä»¶
è¿™äº›æ–‡ä»¶åŒ…å«äº†å¤šç«¯æ··åˆçš„è·¯ç”±ï¼Œç°åœ¨å·²æŒ‰ç«¯åˆ†ç¦»ï¼š

```
/apps/users/urls/merchant_manage_urls.py  # å•†æˆ·ç®¡ç†è·¯ç”±ï¼ˆåº”ç§»åˆ°merchantç«¯ï¼‰
/apps/users/urls/merchant_urls.py         # å•†æˆ·è·¯ç”±ï¼ˆåº”ç§»åˆ°adminç«¯ç®¡ç†ï¼‰
```

**åŸå› ï¼š**
- `merchant_manage_urls.py` çš„åŠŸèƒ½åº”è¯¥åœ¨ `/apps/api_merchant/urls/dashboard_urls.py` ä¸­å®ç°
- `merchant_urls.py` çš„åŠŸèƒ½åº”è¯¥åœ¨ `/apps/api_admin/urls/` ä¸­å®ç°ï¼ˆç®¡ç†å‘˜ç®¡ç†å•†æˆ·ï¼‰

## ğŸŸ¡ éœ€è¦é‡æ„çš„æ–‡ä»¶

### 1. ç”¨æˆ·ç›¸å…³è§†å›¾å’Œè·¯ç”±
```
/apps/users/views/user_views.py          # éœ€è¦æ‹†åˆ†åˆ°ä¸åŒç«¯
/apps/users/urls/user_urls.py            # éœ€è¦æ‹†åˆ†åˆ°ä¸åŒç«¯
/apps/users/views/favorite_views.py      # ç§»åˆ°ç”¨æˆ·ç«¯
/apps/users/urls/favorite_urls.py        # ç§»åˆ°ç”¨æˆ·ç«¯
```

**å»ºè®®ï¼š**
- ç”¨æˆ·ä¸ªäººèµ„æ–™ç®¡ç† â†’ `/apps/api_user/`
- ç”¨æˆ·ç®¡ç†åŠŸèƒ½ â†’ `/apps/api_admin/`
- æ”¶è—åŠŸèƒ½ â†’ `/apps/api_user/`

### 2. å•†æˆ·ç›¸å…³è§†å›¾
```
/apps/users/views/merchant_views.py      # éœ€è¦æ‹†åˆ†
```

**å»ºè®®ï¼š**
- å•†æˆ·è‡ªå·±çš„ä¸šåŠ¡ç®¡ç† â†’ `/apps/api_merchant/`
- ç®¡ç†å‘˜å¯¹å•†æˆ·çš„ç®¡ç† â†’ `/apps/api_admin/`

## ğŸŸ¢ éœ€è¦ä¿ç•™çš„æ–‡ä»¶

### 1. æ ¸å¿ƒä¸šåŠ¡åº”ç”¨
è¿™äº›åº”ç”¨çš„æ–‡ä»¶ç»“æ„ä¿æŒä¸å˜ï¼Œåªæ˜¯è·¯ç”±è°ƒç”¨æ–¹å¼æ”¹å˜ï¼š
```
/apps/regions/          # åœ°åŒºç®¡ç†
/apps/villages/         # æ‘åº„ç®¡ç†
/apps/homestays/        # æ°‘å®¿ç®¡ç†
/apps/products/         # äº§å“ç®¡ç†
/apps/orders/           # è®¢å•ç®¡ç†
/apps/utils/            # å·¥å…·ç±»
```

### 2. æ–°å¢çš„å¤šç«¯APIæ–‡ä»¶
```
/apps/api_user/         # ç”¨æˆ·ç«¯API
/apps/api_merchant/     # å•†æˆ·ç«¯API
/apps/api_admin/        # ç®¡ç†ç«¯API
/apps/services/         # æœåŠ¡å±‚
```

## ğŸ“‹ æ¸…ç†æ­¥éª¤å»ºè®®

### ç¬¬ä¸€é˜¶æ®µï¼šå®‰å…¨åˆ é™¤ï¼ˆç«‹å³å¯æ‰§è¡Œï¼‰
1. å¤‡ä»½æ—§æ–‡ä»¶
2. åˆ é™¤æ˜ç¡®å†—ä½™çš„è®¤è¯æ–‡ä»¶ï¼š
   ```bash
   # å¤‡ä»½
   mkdir -p backup/old_auth
   cp apps/users/views/auth_views.py backup/old_auth/
   cp apps/users/urls/auth_urls.py backup/old_auth/
   
   # åˆ é™¤
   rm apps/users/views/auth_views.py
   rm apps/users/urls/auth_urls.py
   ```

### ç¬¬äºŒé˜¶æ®µï¼šé€æ­¥è¿ç§»ï¼ˆéœ€è¦æµ‹è¯•ï¼‰
1. å°†ç”¨æˆ·ä¸ªäººåŠŸèƒ½è¿ç§»åˆ° `api_user`
2. å°†å•†æˆ·ç®¡ç†åŠŸèƒ½è¿ç§»åˆ° `api_merchant`
3. å°†ç®¡ç†å‘˜åŠŸèƒ½è¿ç§»åˆ° `api_admin`
4. æµ‹è¯•æ‰€æœ‰ç«¯ç‚¹åŠŸèƒ½æ­£å¸¸
5. åˆ é™¤æ—§æ–‡ä»¶

### ç¬¬ä¸‰é˜¶æ®µï¼šæ¸…ç†legacyè·¯ç”±ï¼ˆæœ€åæ‰§è¡Œï¼‰
1. ç¡®è®¤å‰ç«¯å·²å®Œå…¨è¿ç§»åˆ°æ–°API
2. ç§»é™¤ `legacy_api_patterns`
3. æ¸…ç†ç›¸å…³çš„æ—§è·¯ç”±æ–‡ä»¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ¸è¿›å¼æ¸…ç†**ï¼šä¸è¦ä¸€æ¬¡æ€§åˆ é™¤æ‰€æœ‰æ–‡ä»¶ï¼Œåº”è¯¥é€æ­¥è¿ç§»å’Œæµ‹è¯•
2. **å¤‡ä»½é‡è¦**ï¼šåˆ é™¤å‰åŠ¡å¿…å¤‡ä»½æ‰€æœ‰æ–‡ä»¶
3. **å‰ç«¯é…åˆ**ï¼šéœ€è¦å‰ç«¯åŒæ­¥æ›´æ–°APIè°ƒç”¨è·¯å¾„
4. **æµ‹è¯•è¦†ç›–**ï¼šæ¯æ¬¡æ¸…ç†åéƒ½è¦è¿›è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•
5. **æ–‡æ¡£æ›´æ–°**ï¼šåŠæ—¶æ›´æ–°APIæ–‡æ¡£å’Œå¼€å‘æ–‡æ¡£

## ğŸ¯ é¢„æœŸæ”¶ç›Š

æ¸…ç†å®Œæˆåå°†è·å¾—ï¼š
- æ›´æ¸…æ™°çš„ä»£ç ç»“æ„
- å‡å°‘çº¦30%çš„å†—ä½™ä»£ç 
- æ›´å¥½çš„èŒè´£åˆ†ç¦»
- æ›´å®¹æ˜“çš„ç»´æŠ¤å’Œæ‰©å±•
- æ›´æ¸…æ™°çš„APIæ–‡æ¡£

## ğŸ“Š æ–‡ä»¶æ¸…ç†ç»Ÿè®¡

| ç±»å‹ | å¯åˆ é™¤ | éœ€é‡æ„ | ä¿ç•™ |
|------|--------|--------|---------|
| è®¤è¯ç›¸å…³ | 2ä¸ªæ–‡ä»¶ | 0ä¸ª | 3ä¸ªæ–°æ–‡ä»¶ |
| è·¯ç”±ç›¸å…³ | 2ä¸ªæ–‡ä»¶ | 4ä¸ªæ–‡ä»¶ | æ‰€æœ‰ä¸šåŠ¡è·¯ç”± |
| è§†å›¾ç›¸å…³ | 1ä¸ªæ–‡ä»¶ | 3ä¸ªæ–‡ä»¶ | æ‰€æœ‰ä¸šåŠ¡è§†å›¾ |
| **æ€»è®¡** | **5ä¸ªæ–‡ä»¶** | **7ä¸ªæ–‡ä»¶** | **å¤§éƒ¨åˆ†æ–‡ä»¶** |

é¢„è®¡å¯ä»¥å‡å°‘çº¦15-20ä¸ªå†—ä½™æ–‡ä»¶ï¼ŒåŒæ—¶ä¿æŒæ‰€æœ‰ä¸šåŠ¡åŠŸèƒ½å®Œæ•´ã€‚